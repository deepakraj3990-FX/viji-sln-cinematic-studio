/* Viji SLN Cinematic Studio - Optimized Production Build */
"use strict"; document.addEventListener("DOMContentLoaded", function () { initSlideshow(), initNavigation(), initHeaderScroll(), initSmoothScroll(), initScrollAnimations(), initContactForm(), initLazyLoading(), initMarqueeOptimization() }); function initSlideshow() { const e = document.getElementById("slideshow"); if (!e) return; const t = e.querySelectorAll(".slide"), n = document.querySelectorAll(".slideshow-dot"), o = document.getElementById("prevSlide"), i = document.getElementById("nextSlide"); if (0 === t.length) return; let s = 0, r = null; const a = 5e3; let l = !1; function d(e) { if (l) return; e < 0 && (e = t.length - 1), e >= t.length && (e = 0), l = !0, t[s].classList.remove("active"), n[s]?.classList.remove("active"), s = e, t[s].classList.add("active"), n[s]?.classList.add("active"); const o = (s + 1) % t.length, i = t[o].querySelector("img"); i && "lazy" === i.loading && (i.loading = "eager"), setTimeout(() => { l = !1 }, 1500) } function c() { d(s + 1) } function u() { r && clearInterval(r), r = setInterval(c, a) } o?.addEventListener("click", () => { d(s - 1), u() }), i?.addEventListener("click", () => { c(), u() }), n.forEach((e, t) => { e.addEventListener("click", () => { t !== s && (d(t), u()) }) }), e.addEventListener("mouseenter", () => { r && clearInterval(r) }), e.addEventListener("mouseleave", u); let m = 0, f = 0; e.addEventListener("touchstart", e => { m = e.changedTouches[0].screenX }, { passive: !0 }), e.addEventListener("touchend", e => { f = e.changedTouches[0].screenX; const t = m - f; Math.abs(t) > 50 && (t > 0 ? c() : d(s - 1), u()) }, { passive: !0 }), document.addEventListener("keydown", t => { const n = e.getBoundingClientRect(); n.top < window.innerHeight && n.bottom > 0 && ("ArrowLeft" === t.key ? (d(s - 1), u()) : "ArrowRight" === t.key && (c(), u())) }), u() } function initNavigation() { const e = document.getElementById("nav-toggle"), t = document.getElementById("nav-menu"), n = document.querySelectorAll(".nav-link"); if (!e || !t) return; e.addEventListener("click", () => { const n = e.classList.toggle("active"); t.classList.toggle("active"), document.body.style.overflow = n ? "hidden" : "" }), n.forEach(n => { n.addEventListener("click", () => { e.classList.remove("active"), t.classList.remove("active"), document.body.style.overflow = "" }) }); let o = !1; const i = () => { if (o) return; o = !0, requestAnimationFrame(() => { const e = window.scrollY + 150, t = document.querySelectorAll("section[id]"); let i = "home"; t.forEach(t => { const n = t.offsetTop; e >= n && e < n + t.offsetHeight && (i = t.id) }), n.forEach(e => { const t = e.getAttribute("href") === `#${i}`; e.classList.toggle("active", t) }), o = !1 }) }; window.addEventListener("scroll", i, { passive: !0 }), i() } function initHeaderScroll() { const e = document.getElementById("header"); if (!e) return; let t = !1; const n = () => { t || (t = !0, requestAnimationFrame(() => { e.classList.toggle("scrolled", window.scrollY > 50), t = !1 })) }; window.addEventListener("scroll", n, { passive: !0 }), n() } function initSmoothScroll() { const e = document.querySelectorAll('a[href^="#"]'), t = document.getElementById("header"), n = t ? t.offsetHeight : 80; e.forEach(e => { e.addEventListener("click", o => { const i = e.getAttribute("href"); if ("#" === i) return; const s = document.querySelector(i); s && (o.preventDefault(), window.scrollTo({ top: s.offsetTop - n, behavior: "smooth" })) }) }) } function initScrollAnimations() { const e = document.querySelectorAll(".about-image, .about-content, .gallery-item, .contact-content, .contact-form, .portfolio-card"); if (!("IntersectionObserver" in window)) return void e.forEach(e => e.classList.add("visible")); const t = new IntersectionObserver(e => { e.forEach(e => { e.isIntersecting && (e.target.classList.add("visible"), t.unobserve(e.target)) }) }, { threshold: .1, rootMargin: "0px 0px -50px 0px" }); e.forEach((e, n) => { e.classList.add("animate-on-scroll"), e.style.transitionDelay = `${Math.min(.1 * n, .5)}s`, t.observe(e) }) } function initContactForm() { const e = document.getElementById("contact-form"); e && e.addEventListener("submit", async t => { t.preventDefault(); const n = e.querySelector('button[type="submit"]'), o = n.textContent; n.textContent = "Sending...", n.disabled = !0; try { await new Promise(e => setTimeout(e, 1e3)), showToast("Message sent successfully!", "success"), e.reset() } catch (e) { showToast("Failed to send message. Please try again.", "error") } finally { n.textContent = o, n.disabled = !1 } }) } function showToast(e, t = "success") { const n = document.querySelector(".toast"); n && n.remove(); const o = document.createElement("div"); o.className = "toast", o.textContent = e, Object.assign(o.style, { position: "fixed", bottom: "20px", right: "20px", padding: "16px 24px", background: "success" === t ? "#10b981" : "#ef4444", color: "#fff", fontSize: "14px", fontWeight: "500", zIndex: "9999", opacity: "0", transform: "translateY(10px)", transition: "all .3s ease", borderRadius: "8px", boxShadow: "0 10px 40px rgba(0,0,0,0.3)" }), document.body.appendChild(o), requestAnimationFrame(() => { o.style.opacity = "1", o.style.transform = "translateY(0)" }), setTimeout(() => { o.style.opacity = "0", o.style.transform = "translateY(10px)", setTimeout(() => o.remove(), 300) }, 3e3) } function initLazyLoading() { if ("IntersectionObserver" in window) { const e = document.querySelectorAll('img[loading="lazy"]'), t = new IntersectionObserver(e => { e.forEach(e => { if (e.isIntersecting) { const n = e.target; n.src.startsWith("data:") || (n.classList.add("loaded"), t.unobserve(n)) } }) }, { rootMargin: "200px" }); e.forEach(e => t.observe(e)) } } function initMarqueeOptimization() { const e = document.querySelectorAll(".marquee-section"); if (!("IntersectionObserver" in window)) return; const t = new IntersectionObserver(e => { e.forEach(e => { const t = e.target.querySelector(".marquee-track"); t && (t.style.animationPlayState = e.isIntersecting ? "running" : "paused") }) }, { threshold: 0 }); e.forEach(e => t.observe(e)) }
